# Tic-Tac-Toe Server!

This server was constructed to be used by the Tic-Tac-Toe client that lives at https://ttt-client.hernandezjulio58.now.sh/.
The endpoints on this server are :

    - POST /api/auth/user. This endpoint requires a username and password to be sent through the request body. There are requirements for those strings which will be made apparent through error messages.
    This endpoint is used to register users.

    - POST /api/auth/login.  This endpoint also requires a username and password, but this endpoint is used to login in to your account. An authToken is sent back on this endpoint which is used on our the protected endpoint /api/auth/games.

    -POST /api/auth/games. This endpoint requires you to be logged in, or if testing with Postman you need to set a valid authToken in the header. This endpoint is used to create new games, the only other requirement is a game_room key in the body with a special string.'

    -GET /api/auth/games/:game_room. This endpoint requires authentication. It is used to retrieve information about a game in progress.

    -POST /api/auth/games/:game_room. This endpoint requires authentication. It is the endpoint used to add the second player into the game. The special game_room string generated by player one needs to be sent through the request query.

    -PATCH /api/auth/games/:game_room. This endpoint requires authentication. This route also requires the board to be sent through using a string that represents the board. Ex. { board: '00000000X' }. It is the endpoint used to change the game state. The server checks for a winner on every request and handles that accordingly.

## Scripts

Start the application `npm start`

Start nodemon for the application `npm run dev`

Run the tests in watch mode `npm test`

Migrate the dev database `npm run migrate`

Migrate the test database `npm run migrate:test`

## Configuring Postgres

For tests involving time to run properly, configure your Postgres database to run in the UTC timezone.

1. Locate the `postgresql.conf` file for your Postgres installation.
   1. E.g. for an OS X, Homebrew install: `/usr/local/var/postgres/postgresql.conf`
   2. E.g. on Windows, _maybe_: `C:\Program Files\PostgreSQL\11.2\data\postgresql.conf`
2. Find the `timezone` line and set it to `UTC`:

```conf
# - Locale and Formatting -

datestyle = 'iso, mdy'
#intervalstyle = 'postgres'
timezone = 'UTC'
#timezone_abbreviations = 'Default'     # Select the set of available time zone
```
