DROP TABLE IF EXISTS BOARD;
DROP TABLE IF EXISTS users;

CREATE TABLE users (
   id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
   user_name TEXT NOT NULL UNIQUE,
   password TEXT NOT NULL,
   date_created TIMESTAMP DEFAULT now() NOT NULL
);

CREATE TABLE BOARD (
    GAME_ID INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    GAME_ROOM TEXT UNIQUE,
    DATE_CREATED TIMESTAMP DEFAULT now() NOT NULL,
    PLAYER_STARTED_ID INTEGER REFERENCES users(id) ON DELETE CASCADE,
    PLAYER_STARTED_USRNAME TEXT REFERENCES users(user_name) ON DELETE CASCADE,
    PLAYER_JOINED_ID INTEGER REFERENCES users(id) ON DELETE CASCADE,
    PLAYER_JOINED_USRNAME TEXT REFERENCES users(user_name) ON DELETE CASCADE,
    CURRENT_PLAYER INTEGER REFERENCES users(id) ON DELETE CASCADE,
    BOARD CHAR(9) DEFAULT '000000000'
);